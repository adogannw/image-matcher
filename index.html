<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ƒ∞stemci tarafƒ± g√∂r√ºnt√º e≈üle≈ütirme uygulamasƒ± - gizlilik odaklƒ±, √ßevrimdƒ±≈üƒ± √ßalƒ±≈üƒ±r">
    <meta name="theme-color" content="#2563eb">
    <title>G√∂r√ºnt√º E≈üle≈ütirici - Gizlilik Odaklƒ±</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="js/image-matcher.js" as="script">
    <link rel="preload" href="js/ui-controller.js" as="script">
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <h1>üîç G√∂r√ºnt√º E≈üle≈ütirici</h1>
        <p class="privacy-notice">T√ºm i≈ülemler tarayƒ±cƒ±nƒ±zda ger√ßekle≈üir - verileriniz hi√ßbir sunucuya g√∂nderilmez</p>
    </header>

    <!-- Main Content -->
    <main class="main" role="main">
        <!-- Step 1: Image Upload -->
        <section class="step" id="step-upload" aria-labelledby="upload-heading">
            <h2 id="upload-heading">1. G√∂rselleri Y√ºkleyin</h2>
            
            <div class="image-upload-grid">
                <!-- Reference Image -->
                <div class="upload-area" id="ref-upload">
                    <div class="upload-content">
                        <div class="upload-icon">üì∑</div>
                        <h3>Referans G√∂rsel</h3>
                        <p>E≈üle≈ütirilecek b√∂lgeyi se√ßeceƒüiniz g√∂rsel</p>
                        <input type="file" id="ref-file" accept="image/*" aria-describedby="ref-help">
                        <label for="ref-file" class="upload-button">Dosya Se√ß</label>
                        <div id="ref-help" class="help-text">JPG, PNG, WebP formatlarƒ± desteklenir</div>
                    </div>
                    <div class="image-preview" id="ref-preview" style="display: none;">
                        <canvas id="ref-canvas" aria-label="Referans g√∂rsel √∂nizlemesi"></canvas>
                        <div class="image-info" id="ref-info"></div>
                    </div>
                </div>

                <!-- Target Image -->
                <div class="upload-area" id="target-upload">
                    <div class="upload-content">
                        <div class="upload-icon">üéØ</div>
                        <h3>Hedef G√∂rsel</h3>
                        <p>Referans b√∂lgenin aranacaƒüƒ± g√∂rsel</p>
                        <input type="file" id="target-file" accept="image/*" aria-describedby="target-help">
                        <label for="target-file" class="upload-button">Dosya Se√ß</label>
                        <div id="target-help" class="help-text">JPG, PNG, WebP formatlarƒ± desteklenir</div>
                    </div>
                    <div class="image-preview" id="target-preview" style="display: none;">
                        <canvas id="target-canvas" aria-label="Hedef g√∂rsel √∂nizlemesi"></canvas>
                        <div class="image-info" id="target-info"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: Selection -->
        <section class="step" id="step-selection" style="display: none;" aria-labelledby="selection-heading">
            <h2 id="selection-heading">2. Referans B√∂lgeyi Se√ßin</h2>
            
            <div class="selection-container">
                <div class="selection-canvas-wrapper">
                    <canvas id="selection-canvas" 
                            role="img" 
                            aria-label="Referans g√∂rselde b√∂lge se√ßimi"
                            tabindex="0"></canvas>
                    <div class="selection-overlay" id="selection-overlay">
                        <div class="selection-rect" id="selection-rect"></div>
                        <div class="selection-info" id="selection-info">
                            <div class="info-line">
                                <span class="label">Ba≈ülangƒ±√ß:</span>
                                <span class="value" id="selection-start">0, 0</span>
                            </div>
                            <div class="info-line">
                                <span class="label">Biti≈ü:</span>
                                <span class="value" id="selection-end">0, 0</span>
                            </div>
                            <div class="info-line">
                                <span class="label">Boyut:</span>
                                <span class="value" id="selection-size">0 √ó 0</span>
                            </div>
                            <div class="info-line">
                                <span class="label">Alan:</span>
                                <span class="value" id="selection-area">0 px¬≤</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="selection-controls">
                    <div class="control-group">
                        <label for="keyboard-mode">Klavye Modu:</label>
                        <input type="checkbox" id="keyboard-mode" aria-describedby="keyboard-help">
                        <div id="keyboard-help" class="help-text">Ok tu≈ülarƒ± ile hassas se√ßim yapƒ±n</div>
                    </div>
                    
                    <div class="control-group">
                        <button id="clear-selection" class="button secondary">Se√ßimi Temizle</button>
                        <button id="auto-select" class="button secondary">Merkez Se√ßim</button>
                    </div>
                    
                    <div class="control-group">
                        <div class="help-text">
                            <strong>ƒ∞pucu:</strong> K√º√ß√ºk ve belirgin bir b√∂lge se√ßin. 
                            Bu b√∂lge ana g√∂rselde aranacak.
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <button id="proceed-to-match" class="button primary" disabled>E≈üle≈ütirmeyi Ba≈ülat</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 3: Matching -->
        <section class="step" id="step-matching" style="display: none;" aria-labelledby="matching-heading">
            <h2 id="matching-heading">3. E≈üle≈ütirme Sonu√ßlarƒ±</h2>
            
            <div class="matching-container">
                <div class="progress-section">
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text" id="progress-text">E≈üle≈ütirme ba≈ülatƒ±lƒ±yor...</div>
                </div>
                
                <div class="result-container" id="result-container" style="display: none;">
                    <div class="result-image-wrapper">
                        <canvas id="result-canvas" aria-label="E≈üle≈ütirme sonucu"></canvas>
                        <div class="result-overlay">
                            <div class="match-rect" id="match-rect"></div>
                            <div class="match-score" id="match-score">0%</div>
                        </div>
                    </div>
                    
                    <div class="result-details">
                        <h3>Sonu√ß Detaylarƒ±</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <span class="detail-label">Benzerlik Skoru:</span>
                                <span class="detail-value" id="detail-score">0%</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Bulunan Konum:</span>
                                <span class="detail-value" id="detail-location">0, 0</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">ƒ∞≈ülem S√ºresi:</span>
                                <span class="detail-value" id="detail-time">0ms</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Kullanƒ±lan √ñl√ßek:</span>
                                <span class="detail-value" id="detail-scale">1.0x</span>
                            </div>
                        </div>
                        
                        <div class="result-actions">
                            <button id="download-result" class="button primary">Sonucu ƒ∞ndir</button>
                            <button id="new-match" class="button secondary">Yeni E≈üle≈ütirme</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Settings Panel -->
    <aside class="settings-panel" id="settings-panel" aria-labelledby="settings-heading">
        <h3 id="settings-heading">‚öôÔ∏è Ayarlar</h3>
        
        <div class="setting-group">
            <label for="target-size">Hedef Boyut (kƒ±sa kenar):</label>
            <input type="range" id="target-size" min="800" max="2000" value="1200" step="100">
            <span class="setting-value" id="target-size-value">1200px</span>
        </div>
        
        <div class="setting-group">
            <label for="scale-count">√ñl√ßek Sayƒ±sƒ±:</label>
            <input type="range" id="scale-count" min="2" max="8" value="4" step="1">
            <span class="setting-value" id="scale-count-value">4</span>
        </div>
        
        <div class="setting-group">
            <label for="threshold">E≈üik Deƒüeri:</label>
            <input type="range" id="threshold" min="30" max="95" value="60" step="5">
            <span class="setting-value" id="threshold-value">60%</span>
        </div>
        
        <div class="setting-group">
            <label for="rotation-support">D√∂nd√ºrme Desteƒüi (Deneysel):</label>
            <input type="checkbox" id="rotation-support">
        </div>
        
        <div class="setting-group">
            <label for="api-mode">Sunucu API Kullan (Opsiyonel):</label>
            <input type="checkbox" id="api-mode">
            <div class="api-settings" id="api-settings" style="display: none;">
                <input type="url" id="api-url" placeholder="http://localhost:8080/match">
            </div>
        </div>
    </aside>

    <!-- Settings Toggle -->
    <button class="settings-toggle" id="settings-toggle" aria-label="Ayarlarƒ± a√ß/kapat" title="Ayarlar">
        ‚öôÔ∏è
    </button>

    <!-- Status Messages -->
    <div class="status-messages" id="status-messages" role="status" aria-live="polite"></div>

    <!-- Error Messages -->
    <div class="error-messages" id="error-messages" role="alert" aria-live="assertive"></div>

    <!-- Scripts -->
    <script src="js/accessibility.js"></script>
    <script src="js/image-matcher.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="js/tests.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
